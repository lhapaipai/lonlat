export const metadata = {
  title: 'RSource',
  description: 'wrapper for the source object'
}

# RSource


## Usage

```tsx
import { RMap, RSource } from "maplibre-react-components";

import { Coordinates } from "maplibre-gl";
/* always use stable object (outside App component) */
const orthoCoordinates: Coordinates = [
  [6.44, 46.12],
  [6.54, 46.12],
  [6.54, 46.05],
  [6.44, 46.05],
];

export default function App() {
  return (
    <RMap>
      <RSource
        id="city"
        type="geojson"
        data="/data/city.geojson"
      />

      <RSource
        id="ortho"
        type="image"
        url="/data/ortho.jpg"
        coordinates={orthoCoordinates}
      />

      <RSource
        id="raster-tile"
        type="raster"
        tiles="https://tile.openstreetmap.org/{z}/{x}/{y}.png"
        tileSize={256}
      />
    </RMap>
  );
};
```

## Reference

```ts
import {
  VectorSourceSpecification,
  RasterSourceSpecification,
  RasterDEMSourceSpecification,
  GeoJSONSourceSpecification,
  VideoSourceSpecification,
  ImageSourceSpecification,
} from "maplibre-gl";

type SourceSpecification =
  | VectorSourceSpecification
  | RasterSourceSpecification
  | RasterDEMSourceSpecification
  | GeoJSONSourceSpecification
  | VideoSourceSpecification
  | ImageSourceSpecification;

type RSourceProps = SourceSpecification & {
  readonly id: string;
  children?: ReactElement | ReactElement[];
};
```

## Reactivity

Some props are responsive, it depends on the source type

### `image` type

`url` and `coordinates` props are reactive.


### `video` type

`coordinates` prop is reactive.

### `geojson` type

`data`, `cluster`, `clusterMaxZoom`, `clusterRadius` props are reactive.

### `raster`, `raster-dem` and `vector` types

`url` and `tiles` props are reactive.


## `key` vs `id`

When you have conditional renderers within your `RMap` component you will need to set the prop `key` for your `RSource` to help React maintain its association with the correct component.

Consider `id` for `maplibre` mapping and `key` for React mapping.

Note: if `maplibre-react-components` detects a mapping error it will throw an exception.

```tsx
export default function App() {
  const [showCity, setShowCity] = useState(false);

  return (
    <>
      <RMap>
        {showCity && (<RSource
          key="city"
          id="city"
          type="geojson"
          data="/data/city.geojson"
        />)}

        <RSource
          key="raster-tile"
          id="raster-tile"
          type="raster"
          tiles="https://tile.openstreetmap.org/{z}/{x}/{y}.png"
          tileSize={256}
        />
      </RMap>
      <div className="sidebar">
        <div>
          <button onClick={() => setShowCity((s) => !s)}>
            {showCity ? "hide city source" : "show city source"}
          </button>
        </div>
      </div>
    </>

  );
};
```
